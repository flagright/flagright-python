# This file was auto-generated by Fern from our API Definition.

import typing

from ..core.client_wrapper import AsyncClientWrapper, SyncClientWrapper
from ..core.request_options import RequestOptions
from ..types.batch_business_user_events_with_rules_result import BatchBusinessUserEventsWithRulesResult
from ..types.batch_response import BatchResponse
from ..types.boolean_string import BooleanString
from ..types.business import Business
from ..types.business_user_event import BusinessUserEvent
from ..types.consumer_user_event import ConsumerUserEvent
from ..types.page import Page
from ..types.page_size import PageSize
from ..types.transaction import Transaction
from ..types.transaction_event import TransactionEvent
from ..types.user import User
from .raw_client import AsyncRawBatchClient, RawBatchClient

# this is used as the default value for optional parameters
OMIT = typing.cast(typing.Any, ...)


class BatchClient:
    def __init__(self, *, client_wrapper: SyncClientWrapper):
        self._raw_client = RawBatchClient(client_wrapper=client_wrapper)

    @property
    def with_raw_response(self) -> RawBatchClient:
        """
        Retrieves a raw implementation of this client that returns raw responses.

        Returns
        -------
        RawBatchClient
        """
        return self._raw_client

    def verify_transaction(
        self,
        *,
        data: typing.Sequence[Transaction],
        validate_origin_user_id: typing.Optional[BooleanString] = None,
        validate_destination_user_id: typing.Optional[BooleanString] = None,
        batch_id: typing.Optional[str] = OMIT,
        request_options: typing.Optional[RequestOptions] = None,
    ) -> BatchResponse:
        """
        Parameters
        ----------
        data : typing.Sequence[Transaction]

        validate_origin_user_id : typing.Optional[BooleanString]
            Boolean string whether Flagright should validate if provided originUserId exist. True by default

        validate_destination_user_id : typing.Optional[BooleanString]
            Boolean string whether Flagright should validate if provided destinationUserId exist. True by default

        batch_id : typing.Optional[str]

        request_options : typing.Optional[RequestOptions]
            Request-specific configuration.

        Returns
        -------
        BatchResponse
            Created

        Examples
        --------
        from flagright import Flagright, Transaction

        client = Flagright(
            api_key="YOUR_API_KEY",
        )
        client.batch.verify_transaction(
            validate_origin_user_id="true",
            validate_destination_user_id="true",
            data=[
                Transaction(
                    type="type",
                    transaction_id="transactionId",
                    timestamp=1.1,
                )
            ],
        )
        """
        _response = self._raw_client.verify_transaction(
            data=data,
            validate_origin_user_id=validate_origin_user_id,
            validate_destination_user_id=validate_destination_user_id,
            batch_id=batch_id,
            request_options=request_options,
        )
        return _response.data

    def get(
        self,
        batch_id: str,
        *,
        page_size: typing.Optional[PageSize] = None,
        page: typing.Optional[Page] = None,
        request_options: typing.Optional[RequestOptions] = None,
    ) -> BatchBusinessUserEventsWithRulesResult:
        """
        Parameters
        ----------
        batch_id : str
            Unique Batch Identifier

        page_size : typing.Optional[PageSize]
            Page size (default 20)

        page : typing.Optional[Page]
            Page

        request_options : typing.Optional[RequestOptions]
            Request-specific configuration.

        Returns
        -------
        BatchBusinessUserEventsWithRulesResult
            OK

        Examples
        --------
        from flagright import Flagright

        client = Flagright(
            api_key="YOUR_API_KEY",
        )
        client.batch.get(
            batch_id="batchId",
            page_size=1.1,
            page=1.1,
        )
        """
        _response = self._raw_client.get(batch_id, page_size=page_size, page=page, request_options=request_options)
        return _response.data

    def create_transaction_events(
        self,
        *,
        data: typing.Sequence[TransactionEvent],
        batch_id: typing.Optional[str] = OMIT,
        request_options: typing.Optional[RequestOptions] = None,
    ) -> BatchResponse:
        """
        Parameters
        ----------
        data : typing.Sequence[TransactionEvent]

        batch_id : typing.Optional[str]

        request_options : typing.Optional[RequestOptions]
            Request-specific configuration.

        Returns
        -------
        BatchResponse
            Created

        Examples
        --------
        from flagright import Flagright, TransactionEvent

        client = Flagright(
            api_key="YOUR_API_KEY",
        )
        client.batch.create_transaction_events(
            data=[
                TransactionEvent(
                    transaction_state="CREATED",
                    timestamp=1.1,
                    transaction_id="transactionId",
                )
            ],
        )
        """
        _response = self._raw_client.create_transaction_events(
            data=data, batch_id=batch_id, request_options=request_options
        )
        return _response.data

    def create_consumer_users(
        self,
        *,
        data: typing.Sequence[User],
        lock_cra_risk_level: typing.Optional[BooleanString] = None,
        lock_kyc_risk_level: typing.Optional[BooleanString] = None,
        batch_id: typing.Optional[str] = OMIT,
        request_options: typing.Optional[RequestOptions] = None,
    ) -> BatchResponse:
        """
        Parameters
        ----------
        data : typing.Sequence[User]

        lock_cra_risk_level : typing.Optional[BooleanString]
            Boolean string whether Flagright should lock the CRA risk level for the user.

        lock_kyc_risk_level : typing.Optional[BooleanString]
            Boolean string whether Flagright should lock the KYC risk level for the user.

        batch_id : typing.Optional[str]

        request_options : typing.Optional[RequestOptions]
            Request-specific configuration.

        Returns
        -------
        BatchResponse
            Created

        Examples
        --------
        from flagright import Flagright, User

        client = Flagright(
            api_key="YOUR_API_KEY",
        )
        client.batch.create_consumer_users(
            lock_cra_risk_level="true",
            lock_kyc_risk_level="true",
            data=[
                User(
                    user_id="userId",
                    created_timestamp=1.1,
                )
            ],
        )
        """
        _response = self._raw_client.create_consumer_users(
            data=data,
            lock_cra_risk_level=lock_cra_risk_level,
            lock_kyc_risk_level=lock_kyc_risk_level,
            batch_id=batch_id,
            request_options=request_options,
        )
        return _response.data

    def create_business_users(
        self,
        *,
        data: typing.Sequence[Business],
        lock_cra_risk_level: typing.Optional[BooleanString] = None,
        lock_kyc_risk_level: typing.Optional[BooleanString] = None,
        batch_id: typing.Optional[str] = OMIT,
        request_options: typing.Optional[RequestOptions] = None,
    ) -> BatchResponse:
        """
        Parameters
        ----------
        data : typing.Sequence[Business]

        lock_cra_risk_level : typing.Optional[BooleanString]
            Boolean string whether Flagright should lock the CRA risk level for the user.

        lock_kyc_risk_level : typing.Optional[BooleanString]
            Boolean string whether Flagright should lock the KYC risk level for the user.

        batch_id : typing.Optional[str]

        request_options : typing.Optional[RequestOptions]
            Request-specific configuration.

        Returns
        -------
        BatchResponse
            Created

        Examples
        --------
        from flagright import Business, CompanyGeneralDetails, Flagright, LegalEntity

        client = Flagright(
            api_key="YOUR_API_KEY",
        )
        client.batch.create_business_users(
            lock_cra_risk_level="true",
            lock_kyc_risk_level="true",
            data=[
                Business(
                    user_id="userId",
                    created_timestamp=1.1,
                    legal_entity=LegalEntity(
                        company_general_details=CompanyGeneralDetails(
                            legal_name="Ozkan Hazelnut Export JSC",
                            business_industry=["Farming"],
                            main_products_services_sold=["Hazelnut"],
                        ),
                    ),
                )
            ],
        )
        """
        _response = self._raw_client.create_business_users(
            data=data,
            lock_cra_risk_level=lock_cra_risk_level,
            lock_kyc_risk_level=lock_kyc_risk_level,
            batch_id=batch_id,
            request_options=request_options,
        )
        return _response.data

    def create_consumer_user_events(
        self,
        *,
        data: typing.Sequence[ConsumerUserEvent],
        lock_cra_risk_level: typing.Optional[BooleanString] = None,
        lock_kyc_risk_level: typing.Optional[BooleanString] = None,
        batch_id: typing.Optional[str] = OMIT,
        request_options: typing.Optional[RequestOptions] = None,
    ) -> BatchResponse:
        """
        Parameters
        ----------
        data : typing.Sequence[ConsumerUserEvent]

        lock_cra_risk_level : typing.Optional[BooleanString]
            Boolean string whether Flagright should lock the CRA risk level for the user.

        lock_kyc_risk_level : typing.Optional[BooleanString]
            Boolean string whether Flagright should lock the KYC risk level for the user.

        batch_id : typing.Optional[str]

        request_options : typing.Optional[RequestOptions]
            Request-specific configuration.

        Returns
        -------
        BatchResponse
            Created

        Examples
        --------
        from flagright import ConsumerUserEvent, Flagright

        client = Flagright(
            api_key="YOUR_API_KEY",
        )
        client.batch.create_consumer_user_events(
            lock_cra_risk_level="true",
            lock_kyc_risk_level="true",
            data=[
                ConsumerUserEvent(
                    timestamp=1.1,
                    user_id="userId",
                )
            ],
        )
        """
        _response = self._raw_client.create_consumer_user_events(
            data=data,
            lock_cra_risk_level=lock_cra_risk_level,
            lock_kyc_risk_level=lock_kyc_risk_level,
            batch_id=batch_id,
            request_options=request_options,
        )
        return _response.data

    def create_business_user_events(
        self,
        *,
        data: typing.Sequence[BusinessUserEvent],
        lock_cra_risk_level: typing.Optional[BooleanString] = None,
        lock_kyc_risk_level: typing.Optional[BooleanString] = None,
        batch_id: typing.Optional[str] = OMIT,
        request_options: typing.Optional[RequestOptions] = None,
    ) -> BatchResponse:
        """
        Parameters
        ----------
        data : typing.Sequence[BusinessUserEvent]

        lock_cra_risk_level : typing.Optional[BooleanString]
            Boolean string whether Flagright should lock the CRA risk level for the user.

        lock_kyc_risk_level : typing.Optional[BooleanString]
            Boolean string whether Flagright should lock the KYC risk level for the user.

        batch_id : typing.Optional[str]

        request_options : typing.Optional[RequestOptions]
            Request-specific configuration.

        Returns
        -------
        BatchResponse
            Created

        Examples
        --------
        from flagright import BusinessUserEvent, Flagright

        client = Flagright(
            api_key="YOUR_API_KEY",
        )
        client.batch.create_business_user_events(
            lock_cra_risk_level="true",
            lock_kyc_risk_level="true",
            data=[
                BusinessUserEvent(
                    timestamp=1.1,
                    user_id="userId",
                )
            ],
        )
        """
        _response = self._raw_client.create_business_user_events(
            data=data,
            lock_cra_risk_level=lock_cra_risk_level,
            lock_kyc_risk_level=lock_kyc_risk_level,
            batch_id=batch_id,
            request_options=request_options,
        )
        return _response.data


class AsyncBatchClient:
    def __init__(self, *, client_wrapper: AsyncClientWrapper):
        self._raw_client = AsyncRawBatchClient(client_wrapper=client_wrapper)

    @property
    def with_raw_response(self) -> AsyncRawBatchClient:
        """
        Retrieves a raw implementation of this client that returns raw responses.

        Returns
        -------
        AsyncRawBatchClient
        """
        return self._raw_client

    async def verify_transaction(
        self,
        *,
        data: typing.Sequence[Transaction],
        validate_origin_user_id: typing.Optional[BooleanString] = None,
        validate_destination_user_id: typing.Optional[BooleanString] = None,
        batch_id: typing.Optional[str] = OMIT,
        request_options: typing.Optional[RequestOptions] = None,
    ) -> BatchResponse:
        """
        Parameters
        ----------
        data : typing.Sequence[Transaction]

        validate_origin_user_id : typing.Optional[BooleanString]
            Boolean string whether Flagright should validate if provided originUserId exist. True by default

        validate_destination_user_id : typing.Optional[BooleanString]
            Boolean string whether Flagright should validate if provided destinationUserId exist. True by default

        batch_id : typing.Optional[str]

        request_options : typing.Optional[RequestOptions]
            Request-specific configuration.

        Returns
        -------
        BatchResponse
            Created

        Examples
        --------
        import asyncio

        from flagright import AsyncFlagright, Transaction

        client = AsyncFlagright(
            api_key="YOUR_API_KEY",
        )


        async def main() -> None:
            await client.batch.verify_transaction(
                validate_origin_user_id="true",
                validate_destination_user_id="true",
                data=[
                    Transaction(
                        type="type",
                        transaction_id="transactionId",
                        timestamp=1.1,
                    )
                ],
            )


        asyncio.run(main())
        """
        _response = await self._raw_client.verify_transaction(
            data=data,
            validate_origin_user_id=validate_origin_user_id,
            validate_destination_user_id=validate_destination_user_id,
            batch_id=batch_id,
            request_options=request_options,
        )
        return _response.data

    async def get(
        self,
        batch_id: str,
        *,
        page_size: typing.Optional[PageSize] = None,
        page: typing.Optional[Page] = None,
        request_options: typing.Optional[RequestOptions] = None,
    ) -> BatchBusinessUserEventsWithRulesResult:
        """
        Parameters
        ----------
        batch_id : str
            Unique Batch Identifier

        page_size : typing.Optional[PageSize]
            Page size (default 20)

        page : typing.Optional[Page]
            Page

        request_options : typing.Optional[RequestOptions]
            Request-specific configuration.

        Returns
        -------
        BatchBusinessUserEventsWithRulesResult
            OK

        Examples
        --------
        import asyncio

        from flagright import AsyncFlagright

        client = AsyncFlagright(
            api_key="YOUR_API_KEY",
        )


        async def main() -> None:
            await client.batch.get(
                batch_id="batchId",
                page_size=1.1,
                page=1.1,
            )


        asyncio.run(main())
        """
        _response = await self._raw_client.get(
            batch_id, page_size=page_size, page=page, request_options=request_options
        )
        return _response.data

    async def create_transaction_events(
        self,
        *,
        data: typing.Sequence[TransactionEvent],
        batch_id: typing.Optional[str] = OMIT,
        request_options: typing.Optional[RequestOptions] = None,
    ) -> BatchResponse:
        """
        Parameters
        ----------
        data : typing.Sequence[TransactionEvent]

        batch_id : typing.Optional[str]

        request_options : typing.Optional[RequestOptions]
            Request-specific configuration.

        Returns
        -------
        BatchResponse
            Created

        Examples
        --------
        import asyncio

        from flagright import AsyncFlagright, TransactionEvent

        client = AsyncFlagright(
            api_key="YOUR_API_KEY",
        )


        async def main() -> None:
            await client.batch.create_transaction_events(
                data=[
                    TransactionEvent(
                        transaction_state="CREATED",
                        timestamp=1.1,
                        transaction_id="transactionId",
                    )
                ],
            )


        asyncio.run(main())
        """
        _response = await self._raw_client.create_transaction_events(
            data=data, batch_id=batch_id, request_options=request_options
        )
        return _response.data

    async def create_consumer_users(
        self,
        *,
        data: typing.Sequence[User],
        lock_cra_risk_level: typing.Optional[BooleanString] = None,
        lock_kyc_risk_level: typing.Optional[BooleanString] = None,
        batch_id: typing.Optional[str] = OMIT,
        request_options: typing.Optional[RequestOptions] = None,
    ) -> BatchResponse:
        """
        Parameters
        ----------
        data : typing.Sequence[User]

        lock_cra_risk_level : typing.Optional[BooleanString]
            Boolean string whether Flagright should lock the CRA risk level for the user.

        lock_kyc_risk_level : typing.Optional[BooleanString]
            Boolean string whether Flagright should lock the KYC risk level for the user.

        batch_id : typing.Optional[str]

        request_options : typing.Optional[RequestOptions]
            Request-specific configuration.

        Returns
        -------
        BatchResponse
            Created

        Examples
        --------
        import asyncio

        from flagright import AsyncFlagright, User

        client = AsyncFlagright(
            api_key="YOUR_API_KEY",
        )


        async def main() -> None:
            await client.batch.create_consumer_users(
                lock_cra_risk_level="true",
                lock_kyc_risk_level="true",
                data=[
                    User(
                        user_id="userId",
                        created_timestamp=1.1,
                    )
                ],
            )


        asyncio.run(main())
        """
        _response = await self._raw_client.create_consumer_users(
            data=data,
            lock_cra_risk_level=lock_cra_risk_level,
            lock_kyc_risk_level=lock_kyc_risk_level,
            batch_id=batch_id,
            request_options=request_options,
        )
        return _response.data

    async def create_business_users(
        self,
        *,
        data: typing.Sequence[Business],
        lock_cra_risk_level: typing.Optional[BooleanString] = None,
        lock_kyc_risk_level: typing.Optional[BooleanString] = None,
        batch_id: typing.Optional[str] = OMIT,
        request_options: typing.Optional[RequestOptions] = None,
    ) -> BatchResponse:
        """
        Parameters
        ----------
        data : typing.Sequence[Business]

        lock_cra_risk_level : typing.Optional[BooleanString]
            Boolean string whether Flagright should lock the CRA risk level for the user.

        lock_kyc_risk_level : typing.Optional[BooleanString]
            Boolean string whether Flagright should lock the KYC risk level for the user.

        batch_id : typing.Optional[str]

        request_options : typing.Optional[RequestOptions]
            Request-specific configuration.

        Returns
        -------
        BatchResponse
            Created

        Examples
        --------
        import asyncio

        from flagright import (
            AsyncFlagright,
            Business,
            CompanyGeneralDetails,
            LegalEntity,
        )

        client = AsyncFlagright(
            api_key="YOUR_API_KEY",
        )


        async def main() -> None:
            await client.batch.create_business_users(
                lock_cra_risk_level="true",
                lock_kyc_risk_level="true",
                data=[
                    Business(
                        user_id="userId",
                        created_timestamp=1.1,
                        legal_entity=LegalEntity(
                            company_general_details=CompanyGeneralDetails(
                                legal_name="Ozkan Hazelnut Export JSC",
                                business_industry=["Farming"],
                                main_products_services_sold=["Hazelnut"],
                            ),
                        ),
                    )
                ],
            )


        asyncio.run(main())
        """
        _response = await self._raw_client.create_business_users(
            data=data,
            lock_cra_risk_level=lock_cra_risk_level,
            lock_kyc_risk_level=lock_kyc_risk_level,
            batch_id=batch_id,
            request_options=request_options,
        )
        return _response.data

    async def create_consumer_user_events(
        self,
        *,
        data: typing.Sequence[ConsumerUserEvent],
        lock_cra_risk_level: typing.Optional[BooleanString] = None,
        lock_kyc_risk_level: typing.Optional[BooleanString] = None,
        batch_id: typing.Optional[str] = OMIT,
        request_options: typing.Optional[RequestOptions] = None,
    ) -> BatchResponse:
        """
        Parameters
        ----------
        data : typing.Sequence[ConsumerUserEvent]

        lock_cra_risk_level : typing.Optional[BooleanString]
            Boolean string whether Flagright should lock the CRA risk level for the user.

        lock_kyc_risk_level : typing.Optional[BooleanString]
            Boolean string whether Flagright should lock the KYC risk level for the user.

        batch_id : typing.Optional[str]

        request_options : typing.Optional[RequestOptions]
            Request-specific configuration.

        Returns
        -------
        BatchResponse
            Created

        Examples
        --------
        import asyncio

        from flagright import AsyncFlagright, ConsumerUserEvent

        client = AsyncFlagright(
            api_key="YOUR_API_KEY",
        )


        async def main() -> None:
            await client.batch.create_consumer_user_events(
                lock_cra_risk_level="true",
                lock_kyc_risk_level="true",
                data=[
                    ConsumerUserEvent(
                        timestamp=1.1,
                        user_id="userId",
                    )
                ],
            )


        asyncio.run(main())
        """
        _response = await self._raw_client.create_consumer_user_events(
            data=data,
            lock_cra_risk_level=lock_cra_risk_level,
            lock_kyc_risk_level=lock_kyc_risk_level,
            batch_id=batch_id,
            request_options=request_options,
        )
        return _response.data

    async def create_business_user_events(
        self,
        *,
        data: typing.Sequence[BusinessUserEvent],
        lock_cra_risk_level: typing.Optional[BooleanString] = None,
        lock_kyc_risk_level: typing.Optional[BooleanString] = None,
        batch_id: typing.Optional[str] = OMIT,
        request_options: typing.Optional[RequestOptions] = None,
    ) -> BatchResponse:
        """
        Parameters
        ----------
        data : typing.Sequence[BusinessUserEvent]

        lock_cra_risk_level : typing.Optional[BooleanString]
            Boolean string whether Flagright should lock the CRA risk level for the user.

        lock_kyc_risk_level : typing.Optional[BooleanString]
            Boolean string whether Flagright should lock the KYC risk level for the user.

        batch_id : typing.Optional[str]

        request_options : typing.Optional[RequestOptions]
            Request-specific configuration.

        Returns
        -------
        BatchResponse
            Created

        Examples
        --------
        import asyncio

        from flagright import AsyncFlagright, BusinessUserEvent

        client = AsyncFlagright(
            api_key="YOUR_API_KEY",
        )


        async def main() -> None:
            await client.batch.create_business_user_events(
                lock_cra_risk_level="true",
                lock_kyc_risk_level="true",
                data=[
                    BusinessUserEvent(
                        timestamp=1.1,
                        user_id="userId",
                    )
                ],
            )


        asyncio.run(main())
        """
        _response = await self._raw_client.create_business_user_events(
            data=data,
            lock_cra_risk_level=lock_cra_risk_level,
            lock_kyc_risk_level=lock_kyc_risk_level,
            batch_id=batch_id,
            request_options=request_options,
        )
        return _response.data
